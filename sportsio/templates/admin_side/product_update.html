{% extends 'admin_side/base.html' %}  

    {% block content %}   
      <!--  Header End -->
      <div class="container-fluid">
        <div class="container-fluid">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title fw-semibold mb-4">Add Products</h5>
              <div class="card mb-0">
                <div class="card-body p-4">
                    <div class="container">
                        <style>
                            form {
                                max-width: 600px;
                                margin: 0 auto;
                                padding: 20px;
                                border: 1px solid #ccc;
                                border-radius: 5px;
                                background-color: #f9f9f9;
                            }
                        
                            label {
                                font-weight: bold;
                            }
                        
                            input[type="text"],
                            input[type="number"],
                            select,
                            textarea {
                                width: 100%;
                                padding: 8px;
                                margin: 5px 0;
                                border: 1px solid #ccc;
                                border-radius: 4px;
                                box-sizing: border-box;
                            }
                        
                            input[type="checkbox"] {
                                margin-top: 10px;
                            }
                        
                            button[type="submit"] {
                                background-color: #4CAF50;
                                color: white;
                                padding: 12px 20px;
                                border: none;
                                border-radius: 4px;
                                cursor: pointer;
                                width: 100%;
                            }
                        
                            button[type="submit"]:hover {
                                background-color: #45a049;
                            }
                        </style>
                        <!-- Form with Bootstrap Alerts -->
                        <form method="POST" enctype="multipart/form-data" onsubmit="return validateForm()">
                          {% csrf_token %}
                          <!-- Product Fields -->
                          <label for="title">Title:</label><br>
                          <input type="text" id="title" name="title" required value="{{product.title}}"><br><br>
                  
                          <label for="category">Category:</label><br>
                          <select id="category" name="category" required>
                              {% for category in categories %}
                              <option value="{{ category.id }}">{{ category.name }}</option>
                              {% endfor %}
                          </select><br><br>
                          <label for="description">Description:</label><br>
                          <textarea id="description" name="description" rows="4" cols="50">{{product.description}}</textarea><br><br>

                  
                          <label for="price">Price:</label><br>
                          <input type="number" id="price" name="price" value="{{product.price}}"><br><br>
                  
                          <label for="brand">Brand:</label><br>
                          <select id="brand" name="brand" required>
                              {% for choice in brand %}
                              <option value="{{ choice.id }}">{{ choice.brand_name }}</option>
                              {% endfor %}
                          </select><br><br>
                  
                          <label for="status">Status:</label><br>
                          <select id="status" name="status" required>
                              {% for choice in status_choices %}
                              <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                              {% endfor %}
                          </select><br><br>
                  
                          <label for="stock_count">Stock Count:</label><br>
                          <input type="number" id="stock_count" name="stock_count" value="{{product.stock_count}}"><br><br>

                          <label for="image">Image:</label><br>
                          <div id="imageContainer">
                              <img src="{{product.image.url}}" style="max-width: 200px; height: auto;" alt="">
                          </div>
                          <input type="file" id="image" name="image" accept="image/*" value="{{product.image.url}}" onchange="showImage()"><br><br>
                  
                          <label for="weight">Weight:</label><br>
                          <input type="number" id="weight" name="weight" step="0.01" value="{{product.weight}}"><br><br>
                  

                  
                          <label for="available">Available:</label>
                          <input type="checkbox" id="available" name="available" value="{{product.available}}"><br><br>
                  
                          <label for="featured">Featured:</label>
                          <input type="checkbox" id="featured" name="featured" {% if product.featured %} checked {% endif %}><br><br>

                          
                         
                          <label for="offer_price">Offer Price:</label>
                          <input type="number" id="offer_price" value="{{ product.offer_price }}" name="offer_price"><br><br>
            
                  
                          <!-- Product Image Fields -->
                          <div class="form-group">
                            <label>Add multiple images</label>
                            <div>
                                <input class="form-control" type="file"
                                       placeholder="Select images"
                                       name="images"
                                       accept=".jpg, .jpeg, .gif, .png, .webp"
                                       multiple >
                                <small class="form-text text-muted">Max. file size: 10 MB. Allowed images: jpg, gif, png.</small>
                            </div>
                        </div>
                          <!-- Other Product Image Fields -->
                          <!-- Add fields for the product (if any), like the product selection dropdown -->
                  
                          <button style="margin-bottom:20px" type="submit">Submit</button>
                          <button type="button" onclick="window.history.back()">Cancel</button>
                      </form>
                  
                      <!-- End Form -->
                  </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  function showImage() {
      var imageInput = document.getElementById('image');
      var imageContainer = document.getElementById('imageContainer');

      // Check if a file has been selected
      if (imageInput.files && imageInput.files[0]) {
          var reader = new FileReader();
          reader.onload = function(e) {
              // Set the source of the image element to the selected file
              imageContainer.innerHTML = '<img src="' + e.target.result + '" style="max-width: 200px; height: auto;" alt="">';
          };
          reader.readAsDataURL(imageInput.files[0]);
      } else {
          // If no file selected, hide the image container
          imageContainer.innerHTML = '';
      }
  }

  function validateForm() {
    var stockCount = document.getElementById('stock_count').value;


    // Validate stock count


    // You can add more validations here if needed

    return true; // Form submission allowed
  }
</script>
{% endblock %}